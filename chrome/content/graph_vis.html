<!-- https://github.com/almende/vis/blob/master/examples/network/24_hierarchical_layout_userdefined.html -->
<!-- http://visjs.org/docs/network.html -->
<html>
<head>

<link href="chrome://transparentcrypto/content/lib/vis.min.css" rel="stylesheet" type="text/css" />
<script src="chrome://transparentcrypto/content/lib/vis.min.js" charset="utf-8"></script>
<script src="resource://transparentcrypto/util.jsm" charset="utf-8"></script>

</head>

<body>

<div id="container" style="width: 100%; height: 100%;"></div>

<script type="text/javascript">
  try {
    var _data = window.top._data_vis;
    //log("graph_vis.html: " + JSON.stringify(_data));
  } catch (ex) {log(ex);}

    // DOM element where the Timeline will be attached
    var container = document.getElementById('container');

    var data = {
      nodes: new vis.DataSet(_data.nodes),
      edges: new vis.DataSet(_data.edges),
    };

    var options = {
        nodes: {shape: "box"},
        edges: {
          style: "arrow",
          inheritColor: "from",
        },
        groups: {
          u: {
            color: "green",
          },
          f: {
            color: "lightgreen",
          },
          m: {
            color: "yellow",
          },
          n: {
            color: "darkyellow",
          },
          q: {
            color: "red",
          },
          "-": {
            color: "red",
          },
          e: {
            color: "red",
          },
        },
        hierarchicalLayout: {
          enabled: true,
          nodeSpacing: 300,
        },
        stabilize: false,
        smoothCurves: false,
        /*physics: {
          hierarchicalRepulsion: {
            nodeDistance: 300,
          },
        },*/
        navigation: true,
        keyboard: true,
        //configurePhysics: true,
        //dataManipulation: true, // http://visjs.org/docs/network.html#Data_manipulation_custom
        onAdd: function(data, callback) {
          data.level = 1;
          callback(data);
        },
    };

    try {
      var network = new vis.Network(container, data, options);
      window.addEventListener("resize", function(target) {
          try {
            network.redraw();
            network.zoomExtent(false, true);
          } catch (ex) {log(ex);}
        });
    } catch (ex) {log(ex);}
</script>

</body>

</html>
