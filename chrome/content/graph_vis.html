<!-- https://github.com/almende/vis/blob/master/examples/network/24_hierarchical_layout_userdefined.html -->
<!-- http://visjs.org/docs/network.html -->
<html>
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">

<script src="resource://transparentcrypto/util.jsm" charset="utf-8"></script>

<script src="chrome://transparentcrypto/content/lib/vis.min.js" charset="utf-8"></script>
<script src="./lib/vis.min.js" charset="utf-8"></script>
<link href="chrome://transparentcrypto/content/lib/vis.min.css" rel="stylesheet" type="text/css" />
<link href="./lib/vis.min.css" rel="stylesheet" type="text/css" />

</head>

<body>

<div id="container" style="width: 100%; height: 100%;"></div>

<script type="text/javascript">
    try {
      var _data = window.top._data_vis;
      log("graph_vis.html: " + JSON.stringify(_data));
    } catch (ex) {console.log(ex);}



    var container = document.getElementById('container');

    var data = {
      nodes: new vis.DataSet(_data.nodes),
      edges: new vis.DataSet(_data.edges),
    };

    var options = {
        nodes: {shape: "box", color: "gray"},
        edges: {
          style: "arrow",
          inheritColor: "from",
          widthSelectionMultiplier: 1.5,
        },
        groups: { // http://colorbrewer2.org/?type=diverging&scheme=RdYlGn&n=7
          u: { // ultimately valid
            color: "#1a9850",
          },
          f: { // fully valid
            color: "#91cf60",
          },
          m: { // marginal valid
            color: "#d9ef8b",
          },
          n: { // valid
            color: "#ffffbf",
          },
          q: { // undefined
            color: "#fee08b",
          },
          "-": { // unknown
            color: "#fee08b",
          },
          e: { // expired
            color: "#fc8d59",
          },
          r: { // revoked
            color: "#fc8d59",
          },
          d: { // disabled
            color: "#fc8d59",
          },
          i: { // invalid
            color: "#d73027",
          },
          o: { // unknown
            color: "#d73027",
          },
        },
        hierarchicalLayout: {
          enabled: true,
          nodeSpacing: 300,
        },
        stabilize: true,
        smoothCurves: false,
        physics: {
            hierarchicalRepulsion: {
                nodeDistance: 300
            }
        },
        navigation: true,
        keyboard: true,
        //configurePhysics: true,
/*
        dataManipulation: true, // http://visjs.org/docs/network.html#Data_manipulation_custom
        onAdd: function(data, callback) {
          data.level = 1;
          callback(data);
        },
*/
    };

    try {
      var network = new vis.Network(container, data, options);
      window.addEventListener("resize", function(target) {
          try {
            network.redraw();
            network.zoomExtent();
          } catch (ex) {log(ex);}
        });
      function addNode() {
          data.nodes.add({"id":"abcd","level":0,"group":"u","label":"buh","title":"buh"});
      }
      window.setTimeout(addNode, 5000);
    } catch (ex) {log(ex);}

    try {
        Components.utils.import("resource://transparentcrypto/util.jsm");
        Components.utils.import("resource://transparentcrypto/keys.jsm");
        Components.utils.import("resource://enigmail/enigmailCommon.jsm");
    } catch (ex) {log(ex);}

</script>

</body>

</html>
