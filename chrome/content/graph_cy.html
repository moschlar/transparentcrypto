<!-- https://cytoscape.github.io/cytoscape.js/#top -->
<html>
<head>

<script src="chrome://transparentcrypto/content/lib/cytoscape.min.js" charset="utf-8"></script>
<script src="resource://transparentcrypto/util.jsm" charset="utf-8"></script>

</head>

<body>

<div id="container" style="width: 100%; height: 100%; position: absolute; left: 0; top: 0;"></div>

<script type="text/javascript">

    var _data = window.top._data_cy;
    //log("graph_cy.html: " + JSON.stringify(_data));

    try {
        // initialise cytoscape.js on a html dom element with some options:
        cy = cytoscape( options = {
          container: document.getElementById('container'),

          minZoom: 0.5,
          maxZoom: 2,

          // style can be specified as plain JSON, a stylesheet string (probably a CSS-like
          // file pulled from the server), or in a functional format
          style: [
            {
              selector: 'node',
              css: {
                'content': 'data(name)',
                'font-family': 'helvetica',
                'font-size': 14,
                'text-outline-width': 3,
                'text-outline-color': '#888',
                'text-valign': 'center',
                'color': '#fff',
    /*            'width': 'mapData(weight, 30, 80, 20, 50)',
                'height': 'mapData(height, 0, 200, 10, 45)',*/
                'width': '20px',
                'height': '10px',
                'border-color': '#fff'
              }
            },

            {
              selector: ':selected',
              css: {
                'background-color': '#000',
                'line-color': '#000',
                'target-arrow-color': '#000',
                'text-outline-color': '#000'
              }
            },

            {
              selector: 'edge',
              css: {
                'width': 2,
                'target-arrow-shape': 'triangle'
              }
            }
          ],

          layout: {
            name: 'breadthfirst',

            fit: true, // whether to fit the viewport to the graph
            ready: undefined, // callback on layoutready
            stop: undefined, // callback on layoutstop
            directed: true, // whether the tree is directed downwards (or edges can point in any direction if false)
            padding: 10, // padding on fit
            circle: false, // put depths in concentric circles if true, put depths top down if false
            roots: undefined, // the roots of the trees
            maximalAdjustments: 0 // how many times to try to position the nodes in a maximal way (i.e. no backtracking)
          },

          // specify the elements in the graph
          elements: _data,
        }
      );
    } catch (ex) {log(ex);}
</script>

</body>

</html>
